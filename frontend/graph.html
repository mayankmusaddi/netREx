<!doctype html>
<html class="no-js" lang="zxx">

<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>App Landing Template </title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- <link rel="manifest" href="site.webmanifest"> -->
	<link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">
	<!-- Place favicon.ico in the root directory -->

	
 <!-- CSS here -->
   <link rel="stylesheet" href="assets/css/bootstrap.min.css">
   <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
   <link rel="stylesheet" href="assets/css/slicknav.css">
   <link rel="stylesheet" href="assets/css/animate.min.css">
   <link rel="stylesheet" href="assets/css/magnific-popup.css">
   <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
   <link rel="stylesheet" href="assets/css/themify-icons.css">
   <link rel="stylesheet" href="assets/css/slick.css">
   <link rel="stylesheet" href="assets/css/nice-select.css">
   <link rel="stylesheet" href="assets/css/style.css">
   <link rel="stylesheet" href="assets/css/responsive.css">

   <script src='assets/js/jquery.min.js'></script>

   <!-- Add some CSS so we can see the graph! -->
	<style>
		#network-graph {
      	  height: 70vh;
      	  width: 100%;
      	  padding: 0;
      	  margin: 0;
      	}
  	</style>
</head>

<body>
	
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="preloader-circle"></div>
                <div class="preloader-img pere-text">
                    <img src="assets/img/logo/logo.png" alt="">
                </div>
            </div>
        </div>
    </div>
	<!-- Preloader Start -->
	
    <header>
        <!-- Header Start -->
       <div class="header-area header-transparrent ">
            <div class="main-header header-sticky">
                <div class="container">
                    <div class="row align-items-center">
                        <!-- Logo -->
                        <div class="col-xl-2 col-lg-2 col-md-2">
                            <div class="logo">
                                <a href="index.html"><img src="assets/img/logo/logo.png" alt=""></a>
                            </div>
                        </div>
                        <div class="col-xl-10 col-lg-10 col-md-10">
                            <!-- Main-menu -->
                            <div class="main-menu f-right d-none d-lg-block">
                                <nav>
                                    <ul id="navigation">    
                                        <li class="active"><a href="index.html"> Home</a></li>
                                        <li><a href="feature.html">Feature</a></li>
                                        <li><a href="services.html">Services</a></li>
                                        <li><a href="pricing.html">Pricing</a></li>
                                        <li><a href="#">Pages</a>
                                            <ul class="submenu">
                                                <li><a href="blog.html">Blog</a></li>
                                                <li><a href="single-blog.html">Blog Details</a></li>
                                                <li><a href="elements.html">Element</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="contact.html">Contact</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <!-- Mobile Menu -->
                        <div class="col-12">
                            <div class="mobile_menu d-block d-lg-none"></div>
                        </div>
                    </div>
                </div>
            </div>
       </div>
        <!-- Header End -->
    </header>
	<!-- Slider Area Start-->

	<div class="services-area" style="margin-bottom: -100px;">
	</div>
	<!-- Slider Area End-->

	<!-- Start Sample Area -->
	<section class="sample-text-area">
		<div class="container">
				<div class="row">
					<div class="col-lg-8 col-md-8" style="border: 1px solid black;" id="network-graph">
						<!-- <h3 class="mb-30">Graph Area</h3> -->
					</div>


					<div class="col-lg-3 col-md-4 mt-sm-30">
						<div class="single-element-widget">
							<h3 class="mb-30">Options</h3>
							<div class="switch-wrap d-flex justify-content-between">
								<p>Original</p>
								<div class="primary-switch">
									<input type="checkbox" id="original" class="colorswitch" checked>
									<label for="original"></label>
								</div>
							</div>
							<div class="switch-wrap d-flex justify-content-between">
								<p>Module</p>
								<div class="confirm-switch">
									<input type="checkbox" id="module" class="colorswitch">
									<label for="module"></label>
								</div>
							</div>
							<div class="switch-wrap d-flex justify-content-between">
								<p>Regulation</p>
								<div class="default-select" id="regtimeHead" style="margin-top: -7px;">
									<select name="time" id="regtime">
										<option value="">- Time -</option>

									</select>
								</div>
								<div class="confirm-switch">
									<input type="checkbox" id="regulation" class="colorswitch">
									<label for="regulation"></label>
								</div>
							</div>
							
							<div class="button-group-area mt-40">
								<a href="#" class="genric-btn success circle">Force Atlas</a>
								<a href="#" class="genric-btn warning circle">Force Atlas</a>
							</div>

						</div>
					</div>
				</div>
		</div>
	</section>
	<!-- End Sample Area -->

	<!-- Start Table -->
	<div class="whole-wrap">
		<div class="container box_1170">
			<div class="section-top-border">
				<h3 class="mb-30">Table</h3>
				<div class="progress-table-wrap">
					<div class="progress-table">
						<div class="table-head">
							<div class="serial">#</div>
							<div class="country">Countries</div>
							<div class="visit">Visits</div>
							<div class="percentage">Percentages</div>
						</div>
						<div class="table-row">
							<div class="serial">01</div>
							<div class="country"> <img src="assets/img/elements/f1.jpg" alt="flag">Canada</div>
							<div class="visit">645032</div>
							<div class="percentage">
								<div class="progress">
									<div class="progress-bar color-1" role="progressbar" style="width: 80%"
										aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
							</div>
						</div>
						<div class="table-row">
							<div class="serial">02</div>
							<div class="country"> <img src="assets/img/elements/f2.jpg" alt="flag">Canada</div>
							<div class="visit">645032</div>
							<div class="percentage">
								<div class="progress">
									<div class="progress-bar color-2" role="progressbar" style="width: 30%"
										aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
							</div>
						</div>
						<div class="table-row">
							<div class="serial">03</div>
							<div class="country"> <img src="assets/img/elements/f3.jpg" alt="flag">Canada</div>
							<div class="visit">645032</div>
							<div class="percentage">
								<div class="progress">
									<div class="progress-bar color-3" role="progressbar" style="width: 55%"
										aria-valuenow="55" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
							</div>
						</div>
						<div class="table-row">
							<div class="serial">04</div>
							<div class="country"> <img src="assets/img/elements/f4.jpg" alt="flag">Canada</div>
							<div class="visit">645032</div>
							<div class="percentage">
								<div class="progress">
									<div class="progress-bar color-4" role="progressbar" style="width: 60%"
										aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
							</div>
						</div>
						<div class="table-row">
							<div class="serial">05</div>
							<div class="country"> <img src="assets/img/elements/f5.jpg" alt="flag">Canada</div>
							<div class="visit">645032</div>
							<div class="percentage">
								<div class="progress">
									<div class="progress-bar color-5" role="progressbar" style="width: 40%"
										aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
							</div>
						</div>
						<div class="table-row">
							<div class="serial">06</div>
							<div class="country"> <img src="assets/img/elements/f6.jpg" alt="flag">Canada</div>
							<div class="visit">645032</div>
							<div class="percentage">
								<div class="progress">
									<div class="progress-bar color-6" role="progressbar" style="width: 70%"
										aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
							</div>
						</div>
						<div class="table-row">
							<div class="serial">07</div>
							<div class="country"> <img src="assets/img/elements/f7.jpg" alt="flag">Canada</div>
							<div class="visit">645032</div>
							<div class="percentage">
								<div class="progress">
									<div class="progress-bar color-7" role="progressbar" style="width: 30%"
										aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
							</div>
						</div>
						<div class="table-row">
							<div class="serial">08</div>
							<div class="country"> <img src="assets/img/elements/f8.jpg" alt="flag">Canada</div>
							<div class="visit">645032</div>
							<div class="percentage">
								<div class="progress">
									<div class="progress-bar color-8" role="progressbar" style="width: 60%"
										aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- End Table -->
	
	<footer>
		<!-- Footer Start-->
	   <div class="footer-main">
		 <div class="footer-area footer-padding2">
			 <div class="container">
				 <div class="row  justify-content-between">
					 <div class="col-lg-3 col-md-4 col-sm-8">
						  <div class="single-footer-caption mb-30">
							   <!-- logo -->
							  <div class="footer-logo">
								  <a href="index.html"><img src="assets/img/logo/logo2_footer.png" alt=""></a>
							  </div>
							  <div class="footer-tittle">
								  <div class="footer-pera">
									  <p class="info1">Lorem ipsum dolor sit amet, consectetur adipisicing elit sed do eiusmod tempor incididunt ut labore.</p>
								 </div>
							  </div>
						  </div>
					 </div>
					 <div class="col-lg-2 col-md-4 col-sm-5">
						 <div class="single-footer-caption mb-50">
							 <div class="footer-tittle">
								 <h4>Quick Links</h4>
								 <ul>
									 <li><a href="#">About</a></li>
									 <li><a href="#">Features</a></li>
									 <li><a href="#">Pricing</a></li>
									 <li><a href="#">Download</a></li>
									 <li><a href="#">Reviews</a></li>
								 </ul>
							 </div>
						 </div>
					 </div>
					 <div class="col-lg-2 col-md-4 col-sm-7">
						 <div class="single-footer-caption mb-50">
							 <div class="footer-tittle">
								 <h4>Support</h4>
								 <ul>
									 <li><a href="#">Report a bug</a></li>
									 <li><a href="#">Privacy Policy</a></li>
									 <li><a href="#">Terms & Conditions</a></li>
									 <li><a href="#">Sitemap</a></li>
									 <li><a href="#">FAQs</a></li>
								 </ul>
							 </div>
						 </div>
					 </div>
					 <div class="col-lg-3 col-md-6 col-sm-8">
						 <div class="single-footer-caption mb-50">
							 <div class="footer-tittle">
								 <h4>Newsletter</h4>
								 <div class="footer-pera footer-pera2">
								  <p>Heaven fruitful doesn't over lesser in days. Appear </p>
							  </div>
							  <!-- Form -->
							  <div class="footer-form">
								  <div id="mc_embed_signup">
									  <form target="_blank" action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01" method="get" class="subscribe_form relative mail_part" novalidate="true">
										  <input type="email" name="EMAIL" id="newsletter-form-email" placeholder=" Email Address " class="placeholder hide-on-focus" onfocus="this.placeholder = ''" onblur="this.placeholder = ' Email Address '">
										  <div class="form-icon">
											  <button type="submit" name="submit" id="newsletter-submit" class="email_icon newsletter-submit button-contactForm"><img src="assets/img/shape/form_icon.png" alt=""></button>
										  </div>
										  <div class="mt-10 info"></div>
									  </form>
								  </div>
							  </div>
							 </div>
						 </div>
					 </div>
				 </div>
				 <!-- Copy-Right -->
				 <div class="row align-items-center">
					 <div class="col-xl-12 ">
						 <div class="footer-copy-right">
							 <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="ti-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
						 </div>
					 </div>
				 </div>
			 </div>
		 </div>
	   </div>
		<!-- Footer End-->
 
	</footer>
</body>

<!-- JS here -->
	
		<!-- All JS Custom Plugins Link Here here -->
        <script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
		
		<!-- Jquery, Popper, Bootstrap -->
		<script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
        <script src="./assets/js/popper.min.js"></script>
        <script src="./assets/js/bootstrap.min.js"></script>
	    <!-- Jquery Mobile Menu -->
        <script src="./assets/js/jquery.slicknav.min.js"></script>

		<!-- Jquery Slick , Owl-Carousel Plugins -->
        <script src="./assets/js/owl.carousel.min.js"></script>
		<script src="./assets/js/slick.min.js"></script>
		
		<!-- One Page, Animated-HeadLin -->
        <script src="./assets/js/wow.min.js"></script>
		<script src="./assets/js/animated.headline.js"></script>
		<script src="./assets/js/jquery.magnific-popup.js"></script>
		
		<!-- Scrollup, nice-select, sticky -->
        <script src="./assets/js/jquery.scrollUp.min.js"></script>
        <script src="./assets/js/jquery.nice-select.min.js"></script>
		<script src="./assets/js/jquery.sticky.js"></script>
        
        <!-- contact js -->
        <!-- <script src="./assets/js/contact.js"></script> -->
        <script src="./assets/js/jquery.form.js"></script>
        <script src="./assets/js/jquery.validate.min.js"></script>
        <script src="./assets/js/mail-script.js"></script>
        <script src="./assets/js/jquery.ajaxchimp.min.js"></script>
        
		<!-- Jquery Plugins, main Jquery -->	
        <script src="./assets/js/plugins.js"></script>
		<script src="./assets/js/main.js"></script>
		
		<!-- <script src="assets/js/jquery.min.js"></script> -->
		<script src='./sigma/sigma.min.js'></script>
    	<script src='./sigma/sigma.layout.forceAtlas2.min.js'></script>
    	<script src='./sigma/sigma.plugins.filter.js'></script>
    	<script src='./sigma/shape-library.js'></script>
    	<script src='./sigma/sigma.renderers.customShapes.js'></script>
    	<script src='./sigma/sigma.plugins.animate.js'></script>
    	<script src='./sigma/sigma.layout.noverlap.js'></script>
		
		<script>
			// Receiving data from the backend
			// var data = !{JSON.stringify(data)};

			const colors = {
			  "Black" : '#000000',
			  "Blue" : '#0000FF',
			  "Brown" : '#A52A2A',
			  "Cyan" : '#00FFFF',
			  "Green" : '#008000',
			  "GreenYellow" : '#ADFF2F',
			  "Grey" : '#808080',
			  "Grey60" : '#C0C0C0',
			  "LightCyan" : '#E0FFFF',
			  "lightGreen" : '#90EE90',
			  "lightYellow" : '#FFFFE0',
			  "Magenta" : '#FF00FF',
			  "MidnightBlue" : '#191970',
			  "Pink" : '#FFC0CB',
			  "Purple" : '#800080',
			  "Red" : '#FF0000',
			  "royalBlue" : '#4169E1',
			  "Salmon" : '#FA8072',
			  "Tan" : '#D2B48C',
			  "Turquoise" : '#40E0D0',
			  "Yellow" : '#FFFF00',
			};

			// Add a method to the graph model that returns an object with every neighbors of a node inside:
			sigma.classes.graph.addMethod('neighbors', function(nodeId) {
			  var k,
				neighbors = {},
				index = this.allNeighborsIndex[nodeId] || {};
			
			  for (k in index)
				neighbors[k] = this.nodesIndex[k];
			
			  return neighbors;
			});

			// Doesn't Work ??
			sigma.classes.graph.addMethod('reorderNodes', function (id) {
				var l = this.nodesArray.length;
				var temp = null;
				//remove node from the nodesArray
				for (let i = 0; i < l; i++)
					if (this.nodesArray[i].id === id) {
						temp = this.nodesArray.splice(i, 1);
						break;
					}
				//push the node into the end
				this.nodesArray.push(temp[0]);
				return this;
			});

			s = new sigma({ 
				graph: data,
				container: 'network-graph',
				renderer: {
				  container: document.getElementById('network-graph'),
				  type: sigma.renderers.canvas
				},
				settings: {
				  minNodeSize: 1,
				  maxNodeSize: 15,
					//- enableNodeHovering: true, ??
					//- enableEdgeHovering: true, ??
				}
			});

			filter = new sigma.plugins.filter(s);
			var selectedNode;

			var edges = s.graph.edges();
			for (var i = 0; i < edges.length; i += 1){
				edges[i].type = 'curve';
				edges[i].size = 0.1;
				//- edges[i].color = "pink";
			}

			// We first need to save the original colors of our nodes and edges, like this:
			s.graph.nodes().forEach(function(n) {
			  n.originalColor = n.color;
			  n.firstColor = n.color;
			  n.originalBorderColor = n.borderColor;
			});
			s.graph.edges().forEach(function(e) {
			  e.originalColor = e.color;
			});

			// When a node is clicked, we check for each node if it is a neighbor of the clicked one. If not, we set its color as grey, and else, it takes its original color. We do the same for the edges, and we only keep edges that have both extremities colored.
			s.bind('overNode', function(e) {
			  var nodeId = e.data.node.id,
				  toKeep = s.graph.neighbors(nodeId);
			  toKeep[nodeId] = e.data.node;
			
			  s.graph.nodes().forEach(function(n) {
				if (toKeep[n.id]){
				  n.color = n.originalColor;
				  n.borderColor = n.originalBorderColor;
				  //- s.graph.reorderNodes(n.id); ??
				}
				else{
				  n.color = '#eee';
				  n.borderColor = '#eee';
				}
			  });
		  
				s.graph.edges().forEach(function(e) {
				  if (toKeep[e.source] && toKeep[e.target])
					e.color = e.originalColor;
				  else
					e.color = '#eee';
				});
				s.refresh()
			  });
			  // When the stage is clicked, we just color each node and edge with its original color.
			  s.bind('outNode', function(e) {
				s.graph.nodes().forEach(function(n) {
				  n.color = n.originalColor;
				  n.borderColor = n.originalBorderColor;
				});
			
			  s.graph.edges().forEach(function(e) {
				e.color = e.originalColor;
			  });
		  
			});


			//Initialize nodes as a circle
			s.graph.nodes().forEach(function(node, i, a) {
				node.x = Math.cos(Math.PI * 2 * i / a.length);
				node.y = Math.sin(Math.PI * 2 * i / a.length);
			});

			//Call refresh to render the new graph
			CustomShapes.init(s);
			s.refresh();

			s.startForceAtlas2();
			setTimeout(
			  function () {
				console.log('stopping');
				s.stopForceAtlas2();
			  }, 
			  1000);
		  
			var config = {
			  nodeMargin: 3.0,
			  scaleNodes: 1.3,
			};
			// Configure the algorithm
			var listener = s.configNoverlap(config);
			// Bind all events:
			listener.bind('start stop interpolate', function(event) {
			  console.log(event.type);
			});
			// Start the algorithm:
			s.startNoverlap();

			//- console.log(data);
			console.log(s.graph.nodes());
			console.log(s.graph.edges());

			if (selectedNode != undefined){
			  s.cameras[0].goTo({x:selectedNode['read_cam0:x'],y:selectedNode['read_cam0:y'],ratio:0.1});
			}

			$('.colorswitch').click(function(){
				$('.colorswitch').each(function(){
					$(this).prop('checked', false); 
				}); 
				$(this).prop('checked', true);
			});

			// for adding regulation timestamps in select
			if(s.graph.nodes().length > 0){
			  const props = Object.keys(s.graph.nodes()[0].attributes);
			  props.sort();
			  var select = document.getElementById("reg_time");
			  var options = {};
			  for(const prop of props){
				if(prop.substring(0,3) === "fc_"){
				  var val = "reg_"+prop.substring(3);
				  var txt = prop.substring(3).match(/[a-zA-Z]+|[0-9]+/g).join(" ");
				  options[txt]=val;
				}
			  var $el = $("#regtime");
			  $el.empty(); // remove old options
			  $.each(options, function(key,value) {
			    $el.append($("<option></option>")
			       .attr("value", value).text(key));
			  });
			  var $el = $("#regtimeHead > div > ul");
			  $el.empty(); // remove old options
			  $.each(options, function(key,value) {
			    $el.append($("<li></li>")
			       .attr("data-value", value).attr("class", "option").text(key));
			  });
			  }
			};

			$(document).ready(()=>{
			  $('#original').click(()=>{
				s.graph.nodes().forEach(function(n) {
				  n.originalColor = n.firstColor;
				  n.color = n.originalColor;
				});
				s.refresh();
			  });
			  $('#module').click(()=>{
				s.graph.nodes().forEach(function(n) {
				  n.originalColor = colors[n.attributes.wgcna_modules];
				  n.color = n.originalColor;
				});
				s.refresh();
			  });

			  $('#regulation').click(()=>{
				var val = $("#regtime").val();
				s.graph.nodes().forEach(function(n) {
				  var color = colors["Grey"];
				  if(n.attributes.hasOwnProperty(val)){
					if(n.attributes[val] === "Up")
					  color = colors["Red"];
					else
					  color = colors["Blue"];
				  }
				  n.originalColor = color;
				  n.color = n.originalColor;
				});
				s.refresh();
			  });

			  $(function(){
					$('#regtime').change(function(){
						var val= $(this).val();
						var regTrigger = document.getElementById('regulation');
						if(regTrigger.checked){
							s.graph.nodes().forEach(function(n) {
				  			var color = colors["Grey"];
				  			if(n.attributes.hasOwnProperty(val)){
								if(n.attributes[val] === "Up")
								  color = colors["Red"];
								else
								  color = colors["Blue"];
				  			}
				  			n.originalColor = color;
				  			n.color = n.originalColor;
							});
						s.refresh();
						}
				    })
				    $('#regtime').trigger('change');
				});
		});
		</script>
</html>