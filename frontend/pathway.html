<!doctype html>
<html class="no-js" lang="zxx">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>NetREx</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="manifest" href="site.webmanifest">
		<link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">

		<!-- CSS here -->
            <link rel="stylesheet" href="assets/css/bootstrap.min.css">
            <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
            <link rel="stylesheet" href="assets/css/flaticon.css">
            <link rel="stylesheet" href="assets/css/slicknav.css">
            <link rel="stylesheet" href="assets/css/animate.min.css">
            <link rel="stylesheet" href="assets/css/magnific-popup.css">
            <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
            <link rel="stylesheet" href="assets/css/themify-icons.css">
            <link rel="stylesheet" href="assets/css/slick.css">
            <link rel="stylesheet" href="assets/css/nice-select.css">
			<link rel="stylesheet" href="assets/css/style.css">

			<link rel="stylesheet" href="assets/js/DataTables/datatables.min.css">
   			<link rel="stylesheet" href="assets/js/DataTables/dataTables.bootstrap.min.css">
			<link rel="stylesheet" href="assets/js/DataTables/buttons.dataTables.min.css">
			<link rel="stylesheet" href="assets/css/app.css">

			<link rel="stylesheet" href="assets/css/jquery.tree-multiselect.min.css">

			<script src='assets/js/lodash.min.js'></script>
			
			<script src='https://kit.fontawesome.com/a076d05399.js'></script>
   </head>
   <style>
		.dt-buttons{
			left:10%;
		}
	</style>

   <body>
       
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="preloader-circle"></div>
                <div class="preloader-img pere-text">
                    <!-- netrex -->
                    <img src="assets/img/logo/f1.png" alt="">
                </div>
            </div>
        </div>
    </div>
    <!-- Preloader Start -->

    <header>
        <!-- Header Start -->
       <div class="header-area header-transparrent ">
            <div class="main-header header-sticky">
                <div class="container">
                    <div class="row align-items-center">
                        <!-- Logo -->
                        <div class="col-xl-2 col-lg-2 col-md-2">
                            <div class="logo">
                                <a href="index.html"><img src="assets/img/logo/f1.png" alt="" style="width:130px"></a>
                            </div>
                        </div>
                        <div class="col-xl-10 col-lg-10 col-md-10">
                            <!-- Main-menu -->
                            <div class="main-menu f-right d-none d-lg-block">
                                <nav>
                                    <ul id="navigation">
                                        <li><a href="index.html">Home</a></li>
                                        <li><a href="query.html">Query</a>
                                        <li class="active"><a>Browse</a>
                                            <ul class="submenu">
                                                <li><a href="module.html">Module Wise</a></li>
                                                <li><a href="condition.html">Condition Wise</a></li>
                                                <li><a href="pathway.html">Pathway Wise</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="dataset.html">Datasets</a></li>
                                        <li><a href="tutorial.pdf">Help</a></li>
                                        <li><a href="contact.html">Contact</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <!-- Mobile Menu -->
                        <div class="col-12">
                            <div class="mobile_menu d-block d-lg-none"></div>
                        </div>
                    </div>
                </div>
            </div>
       </div>
        <!-- Header End -->
    </header>

    <main>
    <!-- Slider Area Start-->

	<div class="services-area" style="margin-bottom: -40px;">
	</div>
	<!-- Slider Area End-->

	<!-- Start Sample Area -->
	<section class="sample-text-area">
		<div class="container box_1170 border-top-generic">
			<h3 class="text-heading">Pathway Browse</h3>
				<p class="sample-text">
					Browsing through the complete database of genes that play a key role at the specified tissue 
					level when exposed through different abiotic stress conditions or phytohormone changes. Then
					showing a classified list of the genes according to their pathways.
				</p>

			<div class="row">
				<!-- <form class="form-contact" action="/netrex/pathway" id="conditionForm"> -->
				<form class="form-contact" action="/pathway" id="conditionForm">
					<div class="row">
						<div class="input-group-icon col-sm-3"><p>Species : </p></div>
						<div class="input-group-icon col-sm-8">
								<div class="icon"><i class="fa fa-leaf" aria-hidden="true"></i></div>
								<div class="form-select" id="speciesHead">
									<select name="species" id="speciesN" required>
										<option value="rice">Oryza Sativa</option>
									</select>
								</div>
						</div>
						<div class="input-group-icon col-sm-3"><p>Tissue : </p></div>
						<div class="input-group-icon col-sm-8">
							<div class="icon"><i class="fas fa-microscope" aria-hidden="true"></i></div>
							<div class="form-select" id="tissueHead">
								<select name="tissue" id="tissueN" required>
									<option value="root">Root</option>
									<option value="shoot">Shoot</option>
								</select>
							</div>
						</div>
						<div class="input-group-icon col-sm-3"><p>Stress / Hormone Treatment : </p></div>
						<div class="input-group-icon col-sm-8">
							<div class="icon"><i class="fas fa-cloud-sun-rain" aria-hidden="true"></i></div>
							<div class="form-select" id="conditionHead">
								<select name="condition" id="conditionN" required>
									<option value="stress" disabled><span>&#8226;</span> Abiotic Stress</option>
									<option value="drought">Drought</option>
									<option value="cold">Cold</option>
									<option value="flood">Flood</option>
									<option value="osmo">Osmosis</option>
									<option value="hormone" disabled><span>&#8226;</span> Phytohormone Change</option>
									<option value="aba">ABA</option>
									<option value="ja">JA</option>
								</select>
							</div>
						</div>
					</div>
					<div class="form-group mt-3">
						<button type="submit" class="button boxed-btn">Send</button>
					</div>
				</form>
			</div>

			<div class="container box_1170" id="loading-image" style="display: none;">
				<img src="assets/loading.gif" style="width: 70px;"><p>Please wait while data is being fetched. It'll take less than a minute...</p>
			</div>
			
			<div class="row" id="pathway_options" style="display: none;">
				<form class="form-contact" id="pathwayForm" style="width: 2500px;">
					<div class="row">
						<select id="gene-select" multiple="multiple">
						</select>
						<div class="form-group mt-3">
							<button type="submit" class="button boxed-btn">Send</button>
						</div>
					</div>
				</form>
			</div>

		</div>
	</section>
    <!-- End Sample Area -->

	<!-- JS here -->
	
		<!-- All JS Custom Plugins Link Here here -->
        <script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
		
		<!-- Jquery, Popper, Bootstrap -->
		<script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
        <script src="./assets/js/popper.min.js"></script>
        <script src="./assets/js/bootstrap.min.js"></script>
	    <!-- Jquery Mobile Menu -->
        <script src="./assets/js/jquery.slicknav.min.js"></script>

		<!-- Jquery Slick , Owl-Carousel Plugins -->
        <script src="./assets/js/owl.carousel.min.js"></script>
		<script src="./assets/js/slick.min.js"></script>
		
		<!-- One Page, Animated-HeadLin -->
        <script src="./assets/js/wow.min.js"></script>
		<script src="./assets/js/animated.headline.js"></script>
		<script src="./assets/js/jquery.magnific-popup.js"></script>
		
		<!-- Scrollup, nice-select, sticky -->
        <script src="./assets/js/jquery.scrollUp.min.js"></script>
        <script src="./assets/js/jquery.nice-select.min.js"></script>
		<script src="./assets/js/jquery.sticky.js"></script>
        
        <!-- contact js -->
        <script src="./assets/js/contact.js"></script>
        <script src="./assets/js/jquery.form.js"></script>
        <script src="./assets/js/jquery.validate.min.js"></script>
        <script src="./assets/js/mail-script.js"></script>
		<script src="./assets/js/jquery.ajaxchimp.min.js"></script>
	</body>
        
	<!-- Jquery Plugins, main Jquery -->	
    <script src="./assets/js/plugins.js"></script>
	<script src="./assets/js/main.js"></script>

	<script src="./assets/js/helper.js"></script>

    <script src="assets/js/jquery-ui.min.js"></script>
    <script src="assets/js/jquery.tree-multiselect.min.js"></script>

	<script src="./assets/js/DataTables/datatables.min.js"></script>
	<script src="./assets/js/DataTables/dataTables.buttons.min.js"></script>
	<script src="./assets/js/DataTables/buttons.colVis.min.js"></script>
	<script src="./assets/js/DataTables/buttons.html5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js "></script>
	<script src="./assets/js/load_table.js"></script>
		
	<!-- Personalised Scripts -->
	<script type="text/javascript">
		
		$("#pathwayForm").submit(function(e) {
			e.preventDefault(); // avoid to execute the actual submit of the form.

			var selectobject = $("[id*=treemultiselect-0-]:checked");
			var genes = [];
			for(i=0;i<selectobject.length;i++)
				genes.push($(selectobject[i]).parent().data("value"));
			genes = genes.join();

			const params = new URLSearchParams({
				species:$("#speciesN").val(),
				tissue:$("#tissueN").val(),
				condition:$("#conditionN").val(),
				genes: genes,
			});
			// var url = "/netrex/validate.html?"+params.toString();
			var url = "/validate.html?"+params.toString();
			window.location.replace(url);
		});

		$("#conditionForm").submit(function(e) {
			$("#loading-image").show();
			e.preventDefault(); // avoid to execute the actual submit of the form.
			var form = $(this);
			var url = form.attr('action');
			$.ajax({
				type: "POST",
				url: url,
				data: form.serialize(),
				success: function (data) {
					$("#loading-image").hide();
					$('#pathway_options').show();
					loadGenes(data);
				},
				error: function(){
					alert('Error');
				}
			});
		});

		function loadGenes(data){
			$(document).ready(()=>{
				$(function(){
					$.getJSON('./pathway_list.json', function(paths) {
						for(path in paths){
							var subpaths = paths[path];
							for(subpath in subpaths){
								var pathcode = subpaths[subpath];
								data[pathcode].forEach((gene, index) => {
									$("#gene-select").append($("<option></option>")
									   .attr("value", gene).attr("data-section", path+"/"+subpath).text(gene));
								});
							}
						}
						var tree = $("#gene-select").treeMultiselect({ 
							searchable: true,
							enableSelectAll: true, 
							sortable: true,
        					maxSelections: 300,
							startCollapsed: true
						});
					});
				});
			});
		}
	</script>
</html>