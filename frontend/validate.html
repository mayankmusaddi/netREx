<!doctype html>
<html class="no-js" lang="zxx">

<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>NetREx</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- <link rel="manifest" href="site.webmanifest"> -->
	<link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">
	<!-- Place favicon.ico in the root directory -->

	
 <!-- CSS here -->
   <link rel="stylesheet" href="assets/css/bootstrap.min.css">
   <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
   <link rel="stylesheet" href="assets/css/slicknav.css">
   <link rel="stylesheet" href="assets/css/animate.min.css">
   <link rel="stylesheet" href="assets/css/magnific-popup.css">
   <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
   <link rel="stylesheet" href="assets/css/themify-icons.css">
   <link rel="stylesheet" href="assets/css/slick.css">
   <link rel="stylesheet" href="assets/css/nice-select.css">
   <link rel="stylesheet" href="assets/css/style.css">
   <link rel="stylesheet" href="assets/css/responsive.css">

   <link rel="stylesheet" href="assets/js/DataTables/datatables.min.css">
   <link rel="stylesheet" href="assets/js/DataTables/dataTables.bootstrap.min.css">
   <link rel="stylesheet" href="assets/js/DataTables/buttons.dataTables.min.css">

   <link rel="stylesheet" href="assets/css/custom.css">
   <link rel="stylesheet" href="assets/css/app.css">

   <script src="./assets/js/underscore-min.js"></script> <!--Causing Issue with Complete Data-->
   <script src='assets/js/jquery.min.js'></script>
   <script src='assets/js/lodash.min.js'></script>

</head>

<body>
	
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="preloader-circle"></div>
                <div class="preloader-img pere-text">
                    <!-- netrex -->
                    <img src="assets/img/logo/f1.png" alt="">
                </div>
            </div>
        </div>
    </div>
    <!-- Preloader Start -->

    <header>
        <!-- Header Start -->
       <div class="header-area header-transparrent ">
            <div class="main-header header-sticky">
                <div class="container">
                    <div class="row align-items-center">
                        <!-- Logo -->
                        <div class="col-xl-2 col-lg-2 col-md-2">
                            <div class="logo">
                                <a href="index.html"><img src="assets/img/logo/f1.png" alt="" style="width:130px"></a>
                                <!-- <div>NetREx</div> -->
                            </div>
                        </div>
                        <div class="col-xl-10 col-lg-10 col-md-10">
                            <!-- Main-menu -->
                            <div class="main-menu f-right d-none d-lg-block">
                                <nav>
                                    <ul id="navigation">    
                                        <li><a href="index.html">Home</a></li>
                                        <li><a href="overview.html">Overview</a></li>
                                        <li><a href="query.html">Query</a>
                                        <li><a>Browse</a>
                                            <ul class="submenu">
                                                <li><a href="module.html">Module Wise</a></li>
                                                <li><a href="condition.html">Condition Wise</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="dataset.html">Datasets</a></li>
                                        <li><a href="contact.html">Contact</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <!-- Mobile Menu -->
                        <div class="col-12">
                            <div class="mobile_menu d-block d-lg-none"></div>
                        </div>
                    </div>
                </div>
            </div>
       </div>
        <!-- Header End -->
    </header>
	
	<!-- Slider Area Start-->
	<div class="services-area" style="margin-bottom: -35px;"></div>
	<!-- Slider Area End-->

	<div class="container box_1170" id="loading-image">
	<img src="assets/loading.gif" style="width: 70px;"><p>Please wait while data is being fetched. It'll take less than a minute...</p>
	</div>

	<!-- Start Validate Area -->
	<section class="sample-text-area" >
	<div class="container box_1170">
		<div id="validation">
			<div id="metadata">
				<p>
				<h4><b>Species</b> : <span id = "species-type"></span></h4>
				<h4><b>Tissue</b> : <span id = "tissue-type"></span></h4>
				<h4><b>Condition / Treatment</b> : <span id= "condition-type"></span></h4>
			</p>
			</div>
			<div id="valid">
				<p> A total of <span id ="numvalid"></span> genes among the query genes were found in the corresponding dataset</p>
				  <table class="table table-bordered" style="margin-top:10px;">
					<thead class="thead-dark" style="background-color:#2f95f5; border-color: #175a99;">
					  <tr>
						<th scope="col">Filtered Genes*</th>
					  </tr>
					</thead>
					<tbody>
					  <tr><td>
						<p id="valid-genes"></p>
					  </td></tr>
					</tbody>
				  </table>
			</div>
			<div id="invalid">
				<table class="table table-bordered">
					<thead class="thead-dark">
					  <tr>
						<th scope="col">Invalid Genes*</th>
					  </tr>
					</thead>
					<tbody>
                        <tr><td>
                            <p id="invalid-genes"></p>
                        </td></tr>
					</tbody>
				  </table>
			</div>
			<div style="text-align: right;"> * Genes are filtered from the complete network of genes showing fold change for the respective tissue and condition </div>
		</div>
	</div>
	</section>
	<!-- End Validate Area -->

	<!-- Start Visual Area -->
	<section class="sample-text-area">
	<div class="container box_1170 border-top-generic">
		<div id="options">
			<!-- Start Graph Area -->
			<div>
				<p><button type="button" class="btn-outline-secondary" id="show-network">Network Viewer</button></p>

				<div id="network-view" style="display: none;">

					<div class="row" style="margin:0px">

						<!-- Start Network Area -->
						<div class="col-lg-10 col-md-10"  id="network-graph">
							<span class='fas fa-sync-alt' id="refresh" ></span>
							<span class='fas fa-expand-arrows-alt' id="expand" ></span>
						</div>
						<!-- End Network Area -->
						
						<!-- Start Network Options Area -->
						<div class="col-lg-2 col-md-2 mt-sm-30" id="sidepanel">
							<div class="single-element-widget">
								<div class="switch-wrap justify-content-between">
									<p>Up/Down DEGs</p>
									<div class="switch-wrap d-flex justify-content-between">
										<div id="regtimeHead">
											<select name="time" id="regtime">
												<option value="">- Time -</option>
											</select>
										</div>
										<div class="confirm-switch">
											<input type="checkbox" id="regulation" class="colorswitch">
											<label for="regulation"></label>
										</div>
									</div>
								</div>
								<div class="switch-wrap d-flex justify-content-between">
									<p>Module Membership</p>
									<div class="confirm-switch">
										<input type="checkbox" id="module" class="colorswitch">
										<label for="module"></label>
									</div>
								</div>
								<div class="switch-wrap d-flex justify-content-between">
									<p>Default View</p>
									<div class="confirm-switch">
										<input type="checkbox" id="original" class="colorswitch" checked>
										<label for="original"></label>
									</div>
								</div>

								<div class="switch-wrap justify-content-between">
									<p>Pathways</p>
									<div class="switch-wrap d-flex justify-content-between">
										<div id="pathHead">
											<select name="path" id="path">
												<option value="">- KEGG Pathways -</option>
											</select>
										</div>
									</div>
								</div>

								<div class="switch-wrap justify-content-between">
									<p>Other Conditions</p>
									<div class="switch-wrap d-flex justify-content-between">
										<div id="otherCondHead">
											<select name="cond" id="otherCond">
												<option value="">- Conditions -</option>
											</select>
										</div>
									</div>
									<a id="load" class="genric-btn success circle">Load</a>
								</div>
								
								<div class="button-group-area mt-40">
									<a id="downloadimg" class="genric-btn success circle">Download</a>
									<!-- <a href="#" class="genric-btn warning circle">Force Atlas</a> -->
								</div>
							</div>
						</div>
						<!-- End Network Options Area -->
					</div>

					<p><button type="button" class="btn-info" id="show-network-table">Show/Hide Table</button></p>

					<!-- Start Table -->
					<div id="querytable" style="display: none;">
						<nav>
							<div class="nav nav-tabs" id="nav-tab" role="tablist">
							  <a class="nav-item nav-link active" id="nav-node-tab" data-toggle="tab" href="#nav-node" role="tab" aria-controls="nav-node" aria-selected="true">Nodes</a>
							  <a class="nav-item nav-link" id="nav-edge-tab" data-toggle="tab" href="#nav-edge" role="tab" aria-controls="nav-edge" aria-selected="false">Edges</a>
							</div>
						</nav>
						<div class="tab-content" id="nav-tabContent">
							<div class="tab-pane fade show active" id="nav-node" role="tabpanel" aria-labelledby="nav-node-tab">
								<table id="data-table" class="display" style="width:100%">
									<thead><tr></tr></thead>
								</table>
							</div>
							<div class="tab-pane fade" id="nav-edge" role="tabpanel" aria-labelledby="nav-edge-tab">
								<table id="edge-table" class="display" style="width:100%">
									<thead><tr></tr></thead>
								</table>
							</div>
						</div>
					</div>
					<!-- End Table -->

					<p><button type="button" class="btn-outline-secondary" id="show-neighborhood">View Neighborhood</button><span><input type="text" value="50" placeholder="<100" style="width:50px;" id="neighbor-number" required></span> </p>

					<div id="neighborhood-view" style="display: none;">

						<div class="row" style="margin:0px">

							<!-- Start Network Neighborhood Area -->
							<div class="col-lg-10 col-md-10"  id="neighborhood-graph">
							<span class='fas fa-sync-alt' id="refreshN" ></span>
							<span class='fas fa-expand-arrows-alt' id="expandN" ></span>
							</div>
							<!-- End Network Neighborhood Area -->
							
							<!-- Start Network Neighborhood Options Area -->
							<div class="col-lg-2 col-md-2 mt-sm-30" id="sidepanelN">
								<div class="single-element-widget">
									<div class="switch-wrap justify-content-between">
										<p>Up/Down DEGs</p>
										<div class="switch-wrap d-flex justify-content-between">
											<div id="regtimeHeadN">
												<select name="time" id="regtimeN">
													<option value="">- Time -</option>
												</select>
											</div>
											<div class="confirm-switch">
												<input type="checkbox" id="regulationN" class="colorswitchN">
												<label for="regulationN"></label>
											</div>
										</div>
									</div>
									<div class="switch-wrap d-flex justify-content-between">
										<p>Module Membership</p>
										<div class="confirm-switch">
											<input type="checkbox" id="moduleN" class="colorswitchN">
											<label for="moduleN"></label>
										</div>
									</div>
									<div class="switch-wrap d-flex justify-content-between">
										<p>Default View</p>
										<div class="confirm-switch">
											<input type="checkbox" id="originalN" class="colorswitchN" checked>
											<label for="originalN"></label>
										</div>
									</div>

									<div class="switch-wrap justify-content-between">
										<p>Pathways</p>
										<div class="switch-wrap d-flex justify-content-between">
											<div id="pathHeadN">
												<select name="pathN" id="pathN">
													<option value="">- KEGG Pathways -</option>
												</select>
											</div>
										</div>
									</div>

									<div class="switch-wrap justify-content-between">
										<p>Other Conditions</p>
										<div class="switch-wrap d-flex justify-content-between">
											<div id="otherCondHeadN">
												<select name="cond" id="otherCondN">
													<option value="">- Conditions -</option>
												</select>
											</div>
										</div>
										<a id="loadN" class="genric-btn success circle">Load</a>
									</div>
									
									<div class="button-group-area mt-40">
										<a id="downloadimgN" class="genric-btn success circle">Download</a>
										<!-- <a href="#" class="genric-btn warning circle">Force Atlas</a> -->
									</div>
								</div>
							</div>
							<!-- End Network Neighborhood Options Area -->
						</div>
	
						<p><button type="button" class="btn-info" id="show-neighborhood-table">Show/Hide Table</button></p>
	
						<!-- Start Table -->
						<div id="querytableN" style="display: none;">
							<nav>
								<div class="nav nav-tabs" id="nav-tabN" role="tablist">
								  <a class="nav-item nav-link active" id="nav-node-tabN" data-toggle="tab" href="#nav-nodeN" role="tab" aria-controls="nav-nodeN" aria-selected="true">Nodes</a>
								  <a class="nav-item nav-link" id="nav-edge-tabN" data-toggle="tab" href="#nav-edgeN" role="tab" aria-controls="nav-edgeN" aria-selected="false">Edges</a>
								</div>
							</nav>
							<div class="tab-content" id="nav-tabContentN">
								<div class="tab-pane fade show active" id="nav-nodeN" role="tabpanel" aria-labelledby="nav-node-tabN">
									<table id="data-tableN" class="display" style="width:100%">
										<thead><tr></tr></thead>
									</table>
								</div>
								<div class="tab-pane fade" id="nav-edgeN" role="tabpanel" aria-labelledby="nav-edge-tabN">
									<table id="edge-tableN" class="display" style="width:100%">
										<thead><tr></tr></thead>
									</table>
								</div>
							</div>
						</div>
						<!-- End Table -->
					</div>

				</div>
			</div>
			<!-- End Graph Area -->
			
			<!-- Start Expression Area -->
			<div>
				<p><button type="button" class="btn-outline-secondary" id="show-expression">Expression Viewer</button></p>
				<div id="expression-view" style="display: none;">
					<h4 class="text-heading" style="margin-top: 40px;margin-bottom: -20px; text-align:center">HeatMap - Fold-Change</h4>
					<div id='expressionchart'></div>
					<div id='expressionopts'></div>

					<h4 class="text-heading" style="margin-top: 40px;margin-bottom: -20px; text-align:center">HeatMap - <i>p</i>-value</h4>
					<div id='pvaluechart'></div>
					<div id='pvalueopts'></div>

				</div>
			</div>
			<!-- End Expression Areaa -->

		</div>
	</div>
	</section>
	<!-- End Visual Area -->

	<footer>

		<!-- Footer Start-->
	   <div class="footer-main">
		 <div class="footer-area footer-padding">
			 <div class="container">
				 <div class="row  justify-content-between">
					 <div class="col-lg-3 col-md-4 col-sm-8">
						  <div class="single-footer-caption mb-30">
							   <!-- logo -->
							  <div class="footer-logo">
								  <a href="index.html"><img src="assets/img/logo/f1.png" alt="" style="width:100px"></a>
							  </div>
							  <div class="footer-tittle">
								  <div class="footer-pera">
									  <p class="info1">A visualizer for the correlation network of rice genes based on fold changes.</p>
								 </div>
							  </div>
						  </div>
					 </div>
					 <div class="col-lg-2 col-md-4 col-sm-5">
						 <div class="single-footer-caption mb-50">
							 <div class="footer-tittle">
								 <h4>Quick Links</h4>
								 <ul>
									 <li><a href="index.html">Home</a></li>
									 <li><a href="overview.html">About</a></li>
									 <li><a href="query.html">Query</a></li>
									 <li><a href="datasets.html">Datasets</a></li>
									 <li><a href="contact.html">Contact</a></li>
								 </ul>
							 </div>
						 </div>
					 </div>
					 <div class="col-lg-2 col-md-4 col-sm-7">
						 <div class="single-footer-caption mb-50">
							 <div class="footer-tittle">
								 <h4>Support</h4>
								 <ul>
									 <li><a href="contact.html">Report a bug</a></li>
									 <li><a href="contact.html">Privacy Policy</a></li>
									 <li><a href="contact.html">Terms & Conditions</a></li>
									 <li><a href="contact.html">Sitemap</a></li>
									 <li><a href="contact.html">FAQs</a></li>
								 </ul>
							 </div>
						 </div>
					 </div>
					 <div class="col-lg-3 col-md-6 col-sm-8">
						 <div class="single-footer-caption mb-50">
							 <div class="footer-tittle">
								 <h4>Newsletter</h4>
								 <div class="footer-pera footer-pera2">
								  <p>For notification for any updates please subscribe!</p>
							  </div>
							  <!-- Form -->
							  <div class="footer-form">
								  <div id="mc_embed_signup">
									  <form target="_blank" action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01" method="get" class="subscribe_form relative mail_part" novalidate="true">
										  <input type="email" name="EMAIL" id="newsletter-form-email" placeholder=" Email Address " class="placeholder hide-on-focus" onfocus="this.placeholder = ''" onblur="this.placeholder = ' Email Address '">
										  <div class="form-icon">
											  <button type="submit" name="submit" id="newsletter-submit" class="email_icon newsletter-submit button-contactForm"><img src="assets/img/shape/form_icon.png" alt=""></button>
										  </div>
										  <div class="mt-10 info"></div>
									  </form>
								  </div>
							  </div>
							 </div>
						 </div>
					 </div>
				 </div>
				 <!-- Copy-Right -->
				 <div class="row align-items-center">
					 <div class="col-xl-12 ">
						 <div class="footer-copy-right">
							<p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
   Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This application is made with <i class="ti-heart" aria-hidden="true"></i> by <a href="https://researchweb.iiit.ac.in/~mayank.musaddi" target="_blank">Mayank Musaddi</a>
   <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
						 </div>
					 </div>
				 </div>
			 </div>
		 </div>
	   </div>
		<!-- Footer End-->
 
	</footer>
<!-- JS here -->
	
		<!-- All JS Custom Plugins Link Here here -->
        <script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
		
		<!-- Jquery, Popper, Bootstrap -->
		<script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
        <script src="./assets/js/popper.min.js"></script>
        <!-- <script src="./assets/js/bootstrap.min.js"></script> // Called Later after jquery -->
	    <!-- Jquery Mobile Menu -->
        <script src="./assets/js/jquery.slicknav.min.js"></script>

		<!-- Jquery Slick , Owl-Carousel Plugins -->
        <script src="./assets/js/owl.carousel.min.js"></script>
		<script src="./assets/js/slick.min.js"></script>
		
		<!-- One Page, Animated-HeadLin -->
        <script src="./assets/js/wow.min.js"></script>
		<script src="./assets/js/animated.headline.js"></script>
		<script src="./assets/js/jquery.magnific-popup.js"></script>
		
		<!-- Scrollup, nice-select, sticky -->
        <script src="./assets/js/jquery.scrollUp.min.js"></script>
        <script src="./assets/js/jquery.nice-select.min.js"></script>
		<script src="./assets/js/jquery.sticky.js"></script>
        
        <!-- contact js -->
        <!-- <script src="./assets/js/contact.js"></script> -->
        <script src="./assets/js/jquery.form.js"></script>
        <script src="./assets/js/jquery.validate.min.js"></script>
        <script src="./assets/js/mail-script.js"></script>
        <script src="./assets/js/jquery.ajaxchimp.min.js"></script>
        
		<!-- Jquery Plugins, main Jquery -->	
        <script src="./assets/js/plugins.js"></script>
        <script src="./assets/js/main.js"></script>
        
</body>
<script src="./assets/js/helper.js"></script>

<script src="./assets/js/d3.js"></script>
<!-- <script src="./assets/js/jquery-1.11.2.min.js"></script> // Causing Issue with Trigger Change in Select  -->

<script src="./assets/js/bootstrap.min.js"></script>
<script src="./assets/js/clustergrammer.js"></script>
<script src="./assets/js/load_expression.js"></script>

<script src='./sigma/sigma.min.js'></script>
<script src='./sigma/sigma.layout.forceAtlas2.min.js'></script>
<script src='./sigma/sigma.plugins.filter.js'></script>
<script src='./sigma/shape-library.js'></script>
<script src='./sigma/sigma.renderers.customShapes.js'></script>
<script src='./sigma/sigma.plugins.animate.js'></script>
<script src='./sigma/sigma.layout.noverlap.js'></script>
<script src="./sigma/sigma.renderers.snapshot.js"></script>
<script src="./assets/js/load_graph.js"></script>
<script src="./assets/js/load_neighbour_graph.js"></script>

<script src="./assets/js/DataTables/datatables.min.js"></script>
<script src="./assets/js/DataTables/dataTables.buttons.min.js"></script>
<script src="./assets/js/DataTables/buttons.colVis.min.js"></script>
<script src="./assets/js/DataTables/buttons.html5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js "></script>
<script src="./assets/js/load_table.js"></script>
<script src="./assets/js/load_neighbour_table.js"></script>

<script>
	var query = QueryStringToJSON();
	$(".sample-text-area").hide();
	$.ajax({
        type: "POST",
        url: "/netrex/validate",
        // url: "/validate",
        data: JSON.stringify(query),
        contentType: "application/json; charset=utf-8",
        success: function (data) {
			$("#loading-image").hide();
			$(".sample-text-area").show();
			loadPage(data);
		},
		error: function(){
			alert('Error');
		}
	});

	function loadPage(data){		
		document.getElementById("species-type").innerHTML = capitalizeFirstLetter(data.metadata.species);
		document.getElementById("tissue-type").innerHTML = capitalizeFirstLetter(data.metadata.tissue);
		document.getElementById("condition-type").innerHTML = capitalizeFirstLetter(data.metadata.condition);
		document.getElementById("numvalid").innerHTML = data.valid.length;
		document.getElementById("valid-genes").innerHTML = data.valid.join(", ");
		document.getElementById("invalid-genes").innerHTML = data.invalid.join(", ");
		
		$("#show-network-table").click(function(){
			  $('#querytable').toggle();
		});
		$("#show-neighborhood-table").click(function(){
			  $('#querytableN').toggle();
		  });  
		
		$('#show-network').click(function(){
			$.ajax({
				type: "POST",
				url: "/netrex/simple_network",
				// url: "/simple_network",
				data: JSON.stringify({"nodes": data.nodes}),
				contentType: "application/json; charset=utf-8",
				success: function (graph) {
					$('#network-view').show();
					$('#show-network').prop('disabled', true);
					graph.tissue = data.metadata.tissue;
					graph.condition = data.metadata.condition;
					var s = load_graph(graph,'network-graph','',true);
					load_table(graph,'',s);
				},
				error: function(){
					alert('Error');
				}
			});
			
		});
	
		$('#show-neighborhood').click(function(){
			if($('#neighbor-number').val()>0){
				$.ajax({
					type: "POST",
					url: "/netrex/neighborhood_network",
					// url: "/neighborhood_network",
					data: JSON.stringify({"nodes": data.nodes, "neighbor_number":$('#neighbor-number').val()}),
					contentType: "application/json; charset=utf-8",
					success: function (graph) {
						// $('#neighborhood-graph').html('<span class="fas fa-expand-arrows-alt" id="expandN" ></span>');
						$('#neighborhood-view').show();
						$('#show-neighborhood').prop('disabled', true);
						graph.tissue = data.metadata.tissue;
						graph.condition = data.metadata.condition;
						var sN = load_neighbour_graph(graph,'neighborhood-graph');
						load_neighbour_table(graph,'N',sN);
					},
					error: function(){
						alert('Error');
					}
				});
			}
		});
		
		$('#show-expression').click(function(){
			$.ajax({
				type: "POST",
				url: "/netrex/expression",
				// url: "/expression",
				data: JSON.stringify({"nodes": data.nodes}),
				contentType: "application/json; charset=utf-8",
				success: function (data) {
					$('#expression-view').show();
					$('#show-expression').prop('disabled', true);
					load_expression(data.exp, "#expressionchart", "#expressionopts");
					load_expression(data.pval, "#pvaluechart", "#pvalueopts");
				},
				error: function(){
					alert('Error');
				}
			});
			
		});
	}
</script>
</html>