<!doctype html>
<html class="no-js" lang="zxx">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>NetREx</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="manifest" href="site.webmanifest">
		<link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">

		<!-- CSS here -->
            <link rel="stylesheet" href="assets/css/bootstrap.min.css">
            <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
            <link rel="stylesheet" href="assets/css/flaticon.css">
            <link rel="stylesheet" href="assets/css/slicknav.css">
            <link rel="stylesheet" href="assets/css/animate.min.css">
            <link rel="stylesheet" href="assets/css/magnific-popup.css">
            <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
            <link rel="stylesheet" href="assets/css/themify-icons.css">
            <link rel="stylesheet" href="assets/css/slick.css">
            <link rel="stylesheet" href="assets/css/nice-select.css">
			<link rel="stylesheet" href="assets/css/style.css">

			<link rel="stylesheet" href="assets/js/DataTables/datatables.min.css">
   			<link rel="stylesheet" href="assets/js/DataTables/dataTables.bootstrap.min.css">
			<link rel="stylesheet" href="assets/js/DataTables/buttons.dataTables.min.css">
			<link rel="stylesheet" href="assets/css/app.css">

			<link rel="stylesheet" href="assets/css/jquery.tree-multiselect.min.css">

			<script src='assets/js/lodash.min.js'></script>
			
			<script src='https://kit.fontawesome.com/a076d05399.js'></script>
   </head>
   <style>
		.dt-buttons{
			left:10%;
		}
	</style>

   <body>
       
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="preloader-circle"></div>
                <div class="preloader-img pere-text">
                    <!-- netrex -->
                    <img src="assets/img/logo/f1.png" alt="">
                </div>
            </div>
        </div>
    </div>
    <!-- Preloader Start -->

    <header>
        <!-- Header Start -->
       <div class="header-area header-transparrent ">
            <div class="main-header header-sticky">
                <div class="container">
                    <div class="row align-items-center">
                        <!-- Logo -->
                        <div class="col-xl-2 col-lg-2 col-md-2">
                            <div class="logo">
                                <a href="index.html"><img src="assets/img/logo/f1.png" alt="" style="width:130px"></a>
                                <!-- <div>NetREx</div> -->
                            </div>
                        </div>
                        <div class="col-xl-10 col-lg-10 col-md-10">
                            <!-- Main-menu -->
                            <div class="main-menu f-right d-none d-lg-block">
                                <nav>
                                    <ul id="navigation">    
                                        <li><a href="index.html">Home</a></li>
                                        <li><a href="overview.html">Overview</a></li>
                                        <li><a href="query.html">Query</a>
                                        <li class="active"><a>Browse</a>
                                            <ul class="submenu">
                                                <li><a href="module.html">Module Wise</a></li>
                                                <li><a href="condition.html">Condition Wise</a></li>
                                                <li><a href="pathway.html">Pathway Wise</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="dataset.html">Datasets</a></li>
                                        <li><a href="contact.html">Contact</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <!-- Mobile Menu -->
                        <div class="col-12">
                            <div class="mobile_menu d-block d-lg-none"></div>
                        </div>
                    </div>
                </div>
            </div>
       </div>
        <!-- Header End -->
    </header>

    <main>
    <!-- Slider Area Start-->

	<div class="services-area" style="margin-bottom: -40px;">
	</div>
	<!-- Slider Area End-->

	<!-- Start Sample Area -->
	<section class="sample-text-area">
		<div class="container box_1170 border-top-generic">
			<h3 class="text-heading">Pathway Browse</h3>
				<p class="sample-text">
					Browsing through the complete database of genes that play a key role at the specified tissue 
					level when exposed through different abiotic stress conditions or phytohormone changes.
				</p>

			<div class="row">
				<div class="col-lg-8">
					<!-- <form class="form-contact" action="/netrex/load" id="conditionForm"> -->
					<form class="form-contact" action="/pathway" id="conditionForm">
						<div class="row">

							<div class="input-group-icon col-sm-12">
								<div class="icon"><i class="fa fa-leaf" aria-hidden="true"></i></div>
								<div class="form-select" id="speciesHead">
									<select name="species" id="speciesN" required>
											<option value="">- Species -</option>
											<option value="rice">Oryza Sativa</option>
									</select>
								</div>
							</div>

							<div class="input-group-icon col-sm-12">
								<div class="icon"><i class="fas fa-microscope" aria-hidden="true"></i></div>
								<div class="form-select" id="tissueHead">
									<select name="tissue" id="tissueN" required>
											<option value="">- Tissue -</option>
											<option value="root">Root</option>
											<option value="shoot">Shoot</option>
									</select>
								</div>
							</div>

							<div class="input-group-icon col-sm-12">
								<div class="icon"><i class="fas fa-cloud-meatball" aria-hidden="true"></i></div>
								<div class="form-select" id="conditionTypeHead">
									<select name="conditionType" id="conditionTypeN" required>
											<option value="">- Condition Type -</option>
											<option value="stress">Abiotic Stress</option>
											<option value="hormone">Phytohormone Change</option>
									</select>
								</div>
							</div>

							<div class="input-group-icon col-sm-12" style="display: none;" id="select-condition">
								<div class="icon"><i class="fas fa-cloud-sun-rain" aria-hidden="true"></i></div>
								<div class="form-select" id="conditionHead">
									<select name="condition" id="conditionN" required>
										<option value="">- Condition -</option>
									</select>
								</div>
							</div>

						</div>

						<div class="form-group mt-3">
							<button type="submit" class="button boxed-btn">Send</button>
						</div>
					</form>
				</div>
				
				<div class="col-lg-3 offset-lg-1">
					<div class="media contact-info">
						<span class="contact-info__icon"><i class="fas fa-microscope"></i></span>
						<div class="media-body">
							<h3>Tissue Type</h3>
							<p>DEGs determined in a tissue-specific manner</p>
						</div>
					</div>
					<div class="media contact-info">
						<span class="contact-info__icon"><i class="fas fa-cloud-sun-rain"></i></span>
						<div class="media-body">
							<h3>Abiotic Stress Condition</h3>
							<p>Coordinated association between genes when exposed to stress</p>
						</div>
					</div>
				</div>
			</div>

			<div class="container box_1170" id="loading-image" style="display: none;">
				<img src="assets/loading.gif" style="width: 70px;"><p>Please wait while data is being fetched. It'll take less than a minute...</p>
			</div>
			
			<div class="row" id="pathway_options" style="display: none;">
				<select id="gene-select" multiple="multiple">
				</select>

				<!-- <div class="col-lg-8">
					<form class="form-contact" action="/pathway" id="pathwayForm">
						<div class="row">

							<div class="input-group-icon col-sm-12">
								<div class="icon"><i class="fa fa-leaf" aria-hidden="true"></i></div>
								<div class="form-select" id="pathHead">
									<select name="path" id="path" required>
										<option value="">- Path -</option>
									</select>
								</div>
							</div>

							<div class="input-group-icon col-sm-12" style="display: none;" id="select-path">
								<div class="icon"><i class="fas fa-cloud-sun-rain" aria-hidden="true"></i></div>
								<div class="form-select" id="path2Head">
									<select name="path2" id="path2" required>
										<option value="">- Sub Path -</option>
									</select>
								</div>
							</div>

							<div class="input-group-icon col-sm-12" style="display: none;" id="select-genes">
								<div class="icon"><i class="fas fa-cloud-sun-rain" aria-hidden="true"></i></div>
								<div class="form-select" id="genesHead">
									<select name="genes" id="genes" required>
										<option value="">- Genes -</option>
									</select>
								</div>
							</div>

						</div>

						<div class="form-group mt-3">
							<button type="submit" class="button boxed-btn">Send</button>
						</div>
					</form>
				</div> -->
			</div>

		</div>

	</section>
    <!-- End Sample Area -->

	<footer>

		<!-- Footer Start-->
	   <div class="footer-main">
		 <div class="footer-area footer-padding">
			 <div class="container">
				 <div class="row  justify-content-between">
					 <div class="col-lg-3 col-md-4 col-sm-8">
						  <div class="single-footer-caption mb-30">
							   <!-- logo -->
							  <div class="footer-logo">
								  <a href="index.html"><img src="assets/img/logo/f1.png" alt="" style="width:100px"></a>
							  </div>
							  <div class="footer-tittle">
								  <div class="footer-pera">
									  <p class="info1">A visualizer for the correlation network of rice genes based on fold changes.</p>
								 </div>
							  </div>
						  </div>
					 </div>
					 <div class="col-lg-2 col-md-4 col-sm-5">
						 <div class="single-footer-caption mb-50">
							 <div class="footer-tittle">
								 <h4>Quick Links</h4>
								 <ul>
									 <li><a href="index.html">Home</a></li>
									 <li><a href="overview.html">About</a></li>
									 <li><a href="query.html">Query</a></li>
									 <li><a href="datasets.html">Datasets</a></li>
									 <li><a href="contact.html">Contact</a></li>
								 </ul>
							 </div>
						 </div>
					 </div>
					 <div class="col-lg-2 col-md-4 col-sm-7">
						 <div class="single-footer-caption mb-50">
							 <div class="footer-tittle">
								 <h4>Support</h4>
								 <ul>
									 <li><a href="contact.html">Report a bug</a></li>
									 <li><a href="contact.html">Privacy Policy</a></li>
									 <li><a href="contact.html">Terms & Conditions</a></li>
									 <li><a href="contact.html">Sitemap</a></li>
									 <li><a href="contact.html">FAQs</a></li>
								 </ul>
							 </div>
						 </div>
					 </div>
					 <div class="col-lg-3 col-md-6 col-sm-8">
						 <div class="single-footer-caption mb-50">
							 <div class="footer-tittle">
								 <h4>Newsletter</h4>
								 <div class="footer-pera footer-pera2">
								  <p>For notification for any updates please subscribe!</p>
							  </div>
							  <!-- Form -->
							  <div class="footer-form">
								  <div id="mc_embed_signup">
									  <form target="_blank" action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01" method="get" class="subscribe_form relative mail_part" novalidate="true">
										  <input type="email" name="EMAIL" id="newsletter-form-email" placeholder=" Email Address " class="placeholder hide-on-focus" onfocus="this.placeholder = ''" onblur="this.placeholder = ' Email Address '">
										  <div class="form-icon">
											  <button type="submit" name="submit" id="newsletter-submit" class="email_icon newsletter-submit button-contactForm"><img src="assets/img/shape/form_icon.png" alt=""></button>
										  </div>
										  <div class="mt-10 info"></div>
									  </form>
								  </div>
							  </div>
							 </div>
						 </div>
					 </div>
				 </div>
				 <!-- Copy-Right -->
				 <div class="row align-items-center">
					 <div class="col-xl-12 ">
						 <div class="footer-copy-right">
							<p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
   Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This application is made with <i class="ti-heart" aria-hidden="true"></i> by <a href="https://researchweb.iiit.ac.in/~mayank.musaddi" target="_blank">Mayank Musaddi</a>
   <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
						 </div>
					 </div>
				 </div>
			 </div>
		 </div>
	   </div>
		<!-- Footer End-->
 
	</footer>
	<!-- JS here -->
	
		<!-- All JS Custom Plugins Link Here here -->
        <script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
		
		<!-- Jquery, Popper, Bootstrap -->
		<script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
        <script src="./assets/js/popper.min.js"></script>
        <script src="./assets/js/bootstrap.min.js"></script>
	    <!-- Jquery Mobile Menu -->
        <script src="./assets/js/jquery.slicknav.min.js"></script>

		<!-- Jquery Slick , Owl-Carousel Plugins -->
        <script src="./assets/js/owl.carousel.min.js"></script>
		<script src="./assets/js/slick.min.js"></script>
		
		<!-- One Page, Animated-HeadLin -->
        <script src="./assets/js/wow.min.js"></script>
		<script src="./assets/js/animated.headline.js"></script>
		<script src="./assets/js/jquery.magnific-popup.js"></script>
		
		<!-- Scrollup, nice-select, sticky -->
        <script src="./assets/js/jquery.scrollUp.min.js"></script>
        <script src="./assets/js/jquery.nice-select.min.js"></script>
		<script src="./assets/js/jquery.sticky.js"></script>
        
        <!-- contact js -->
        <script src="./assets/js/contact.js"></script>
        <script src="./assets/js/jquery.form.js"></script>
        <script src="./assets/js/jquery.validate.min.js"></script>
        <script src="./assets/js/mail-script.js"></script>
		<script src="./assets/js/jquery.ajaxchimp.min.js"></script>
	</body>
        
	<!-- Jquery Plugins, main Jquery -->	
    <script src="./assets/js/plugins.js"></script>
	<script src="./assets/js/main.js"></script>

	<script src="./assets/js/helper.js"></script>

    <script src="assets/js/jquery-ui.min.js"></script>
    <script src="assets/js/jquery.tree-multiselect.min.js"></script>

	<script src="./assets/js/DataTables/datatables.min.js"></script>
	<script src="./assets/js/DataTables/dataTables.buttons.min.js"></script>
	<script src="./assets/js/DataTables/buttons.colVis.min.js"></script>
	<script src="./assets/js/DataTables/buttons.html5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js "></script>
	<script src="./assets/js/load_table.js"></script>
		
	<!-- Personalised Scripts -->
	<script type="text/javascript">
		
		$("#conditionForm").submit(function(e) {
			$("#loading-image").show();
			e.preventDefault(); // avoid to execute the actual submit of the form.
			var form = $(this);
			var url = form.attr('action');
			$.ajax({
				type: "POST",
				url: url,
				data: form.serialize(),
				success: function (data) {
					$("#loading-image").hide();
					$('#pathway_options').show();
					loadGenes(data);
				},
				error: function(){
					alert('Error');
				}
			});
		});

		function loadGenes(data){
			$(document).ready(()=>{
				$(function(){

					$.getJSON('./pathway_list.json', function(paths) {
						for(path in paths){
							var subpaths = paths[path];
							for(subpath in subpaths){
								var pathcode = subpaths[subpath];
								data[pathcode].forEach((gene, index) => {
									$("#gene-select").append($("<option></option>")
									   .attr("value", gene).attr("data-section", path+"/"+subpath).text(gene));
								});
							}
						}

						var tree = $("#gene-select").treeMultiselect({ 
							searchable: true,
							enableSelectAll: true, 
							sortable: true,
        					maxSelections: 100,
							startCollapsed: true
						});
					});

					// $('#path2').change(function(){
					// 	var selected = $(this).val();
					// 	if(selected in data){
					// 		$("#select-genes").show();
					// 		var $el1 = $("#genes");
					// 		var $el2 = $("#genesHead > div > ul");
					// 		$el1.empty(); // remove old options
					// 		$el2.empty(); // remove old options

					// 		data[selected].forEach((item, index) => {
					// 			$el1.append($("<option></option>")
					// 			.attr("value", item).text(item));
					// 			$el2.append($("<li></li>")
					// 			.attr("data-value", item).attr("class", "option").text(item));
					// 			}
					// 		);

					// 		$el1.val('');
					// 		$("#genesHead > div > span").html("- Genes -");
					// 	}
					// 	else{
					// 		$("#select-genes").hide();
					// 	}
					// });
					// $('#path2').trigger('change');

				});
			});

		}

		$(document).ready(()=>{
			$(function(){

				// $.getJSON('./pathway_list.json', function(data) {
				// 	//do stuff with your data here
				// 	var $el1 = $("#path");
				// 	var $el2 = $("#pathHead > div > ul");
				// 	for(key in data){
				// 		$el1.append($("<option></option>")
				// 		   .attr("value", key).text(key));
				// 		$el2.append($("<li></li>")
				// 	     .attr("data-value", key).attr("class", "option").text(key));
				// 	}

				// 	$('#path').change(function(){
				// 		var selected = $(this).val();
				// 		if(selected in data){
				// 			$("#select-path").show();
				// 			var $el1 = $("#path2");
				// 			var $el2 = $("#path2Head > div > ul");
				// 			$el1.empty(); // remove old options
				// 			$el2.empty(); // remove old options

				// 			for(key in data[selected]){
				// 				$el1.append($("<option></option>")
				// 				.attr("value", data[selected][key]).text(key));
				// 				$el2.append($("<li></li>")
				// 				.attr("data-value", data[selected][key]).attr("class", "option").text(key));
				// 			}
				// 			$el1.val('');
				// 			$("#path2Head > div > span").html("- Sub Path -");
				// 		}
				// 		else{
				// 			$("#select-path").hide();
				// 		}
				// 	});
				// 	$('#path').trigger('change');
				// });


				$('#conditionTypeN').change(function(){
					var data= $(this).val();
					var options = {
						'- Condition -' : '',
					};
					var stressCondition = {
						'- Condition -' : '',
						'Drought' : 'drought',
						'Cold' : 'cold',
						'Flood' : 'flood',
						'Osmosis' : 'osmo',
					};
					var hormoneCondition = {
						'- Condition -' : '',
						'ABA' : 'aba',
						'JA' : 'ja',
					};
					
					if(data == "stress"){
						$("#select-condition").show();
						$("#conditionN").val('');
						$("#conditionHead > div > span").html("- Condition -");
						options = stressCondition;
					}
					else if(data == "hormone"){
						$("#select-condition").show();
						$("#conditionN").val('');
						$("#conditionHead > div > span").html("- Condition -");
						options = hormoneCondition;
					}
					else{
						$("#select-condition").hide();
					}
					var $el = $("#conditionN");
					$el.empty(); // remove old options
					$.each(options, function(key,value) {
					  $el.append($("<option></option>")
					     .attr("value", value).text(key));
					});
					var $el = $("#conditionHead > div > ul");
					$el.empty(); // remove old options
					$.each(options, function(key,value) {
					  $el.append($("<li></li>")
					     .attr("data-value", value).attr("class", "option").text(key));
					});
			   });
			   $('#conditionTypeN').trigger('change');
			});
		});
	</script>
</html>